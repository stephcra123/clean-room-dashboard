<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Touch Attribution Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            padding: 16px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-item:hover {
            border-color: #3b82f6;
            background-color: #f1f5f9;
        }

        .control-item.active {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-left: 4px solid;
            transition: transform 0.2s ease;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        .metric-card.blue { border-left-color: #3b82f6; }
        .metric-card.green { border-left-color: #10b981; }
        .metric-card.yellow { border-left-color: #f59e0b; }
        .metric-card.purple { border-left-color: #8b5cf6; }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .metric-title {
            font-size: 14px;
            color: #64748b;
            font-weight: 500;
        }

        .metric-icon {
            width: 24px;
            height: 24px;
            opacity: 0.7;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .metric-change {
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: 600;
        }

        .metric-change.positive { color: #059669; }
        .metric-change.negative { color: #dc2626; }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .chart-title {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
            margin-bottom: 16px;
        }

        .table-container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .data-table th,
        .data-table td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background-color: #f8fafc;
            font-weight: 600;
            color: #475569;
            font-size: 14px;
        }

        .data-table td {
            font-size: 14px;
        }

        .channel-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .holdout-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .holdout-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background-color: #f8fafc;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .holdout-left h4 {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .holdout-left p {
            font-size: 14px;
            color: #64748b;
        }

        .holdout-right {
            text-align: right;
        }

        .holdout-value {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
        }

        .holdout-subtext {
            font-size: 14px;
            color: #64748b;
        }

        .lift-highlight {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            border: 1px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin-top: 16px;
        }

        .lift-value {
            font-size: 24px;
            font-weight: 700;
            color: #1d4ed8;
        }

        .compliance-notice {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin-top: 24px;
        }

        .compliance-notice p {
            font-size: 14px;
            color: #1e40af;
            line-height: 1.6;
        }

        @media (min-width: 768px) {
            .container {
                padding: 24px;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1200px;
                margin: 0 auto;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Multi-Touch Attribution Analytics</h1>
            <p>Clean Room Data | Customer Journey Intelligence</p>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="control-item active" onclick="selectPeriod(this, '30d')">Last 30 Days</div>
            <div class="control-item" onclick="selectPeriod(this, '90d')">Last 90 Days</div>
            <div class="control-item" onclick="selectPeriod(this, '1y')">Last Year</div>
            <div class="control-item" onclick="exportReport()">ðŸ“¥ Export Report</div>
        </div>

        <!-- Key Metrics -->
        <div class="metrics-grid">
            <div class="metric-card blue">
                <div class="metric-header">
                    <div class="metric-title">Total Audience Reached</div>
                    <div class="metric-icon">ðŸ‘¥</div>
                </div>
                <div class="metric-value">12.4M</div>
                <div class="metric-change positive">â†— +8.2%</div>
            </div>

            <div class="metric-card green">
                <div class="metric-header">
                    <div class="metric-title">Blended ROAS</div>
                    <div class="metric-icon">ðŸ’°</div>
                </div>
                <div class="metric-value">4.6x</div>
                <div class="metric-change positive">â†— +12.4%</div>
            </div>

            <div class="metric-card yellow">
                <div class="metric-header">
                    <div class="metric-title">Avg Sales Rate</div>
                    <div class="metric-icon">ðŸŽ¯</div>
                </div>
                <div class="metric-value">3.5%</div>
                <div class="metric-change negative">â†˜ -2.1%</div>
            </div>

            <div class="metric-card purple">
                <div class="metric-header">
                    <div class="metric-title">Attribution Lift</div>
                    <div class="metric-icon">ðŸ“ˆ</div>
                </div>
                <div class="metric-value">+19.2%</div>
                <div class="metric-change positive">â†— +5.8%</div>
            </div>
        </div>

        <!-- Channel Performance Chart -->
        <div class="chart-container">
            <h3 class="chart-title">Channel Performance - ROAS Analysis</h3>
            <div class="chart-wrapper">
                <canvas id="roasChart"></canvas>
            </div>
        </div>

        <!-- Customer Journey Chart -->
        <div class="chart-container">
            <h3 class="chart-title">Customer Journey - Touchpoints to Conversion</h3>
            <div class="chart-wrapper">
                <canvas id="journeyChart"></canvas>
            </div>
        </div>

        <!-- Channel Attribution Table -->
        <div class="table-container">
            <h3 class="chart-title">Channel Attribution Analysis</h3>
            <div style="overflow-x: auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Channel</th>
                            <th>Audience</th>
                            <th>ROAS</th>
                            <th>Sales Rate</th>
                            <th>Exposed</th>
                            <th>Unexposed</th>
                            <th>Lift vs Control</th>
                            <th>Lift vs Unexposed</th>
                        </tr>
                    </thead>
                    <tbody id="channelTableBody">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Attribution Models Chart -->
        <div class="chart-container">
            <h3 class="chart-title">Attribution Model Comparison</h3>
            <div class="chart-wrapper">
                <canvas id="attributionChart"></canvas>
            </div>
        </div>

        <!-- Holdout Test Results -->
        <div class="holdout-section">
            <h3 class="chart-title">Holdout Test Results</h3>
            
            <div class="holdout-item">
                <div class="holdout-left">
                    <h4>Test Group</h4>
                    <p>Audience: 1.1M</p>
                </div>
                <div class="holdout-right">
                    <div class="holdout-value">3.85%</div>
                    <div class="holdout-subtext">42.8K Sales</div>
                </div>
            </div>

            <div class="holdout-item">
                <div class="holdout-left">
                    <h4>Control Group</h4>
                    <p>Audience: 1.0M</p>
                </div>
                <div class="holdout-right">
                    <div class="holdout-value">3.12%</div>
                    <div class="holdout-subtext">31.2K Sales</div>
                </div>
            </div>

            <div class="holdout-item">
                <div class="holdout-left">
                    <h4>Holdout</h4>
                    <p>Audience: 1.0M</p>
                </div>
                <div class="holdout-right">
                    <div class="holdout-value">2.89%</div>
                    <div class="holdout-subtext">28.9K Sales</div>
                </div>
            </div>

            <div class="lift-highlight">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 600; color: #1e40af;">Incremental Lift:</span>
                    <span class="lift-value">+23.4%</span>
                </div>
                <p style="font-size: 14px; color: #1e40af; margin-top: 8px;">
                    Test vs Control statistical significance: p < 0.001
                </p>
            </div>
        </div>

        <!-- Compliance Notice -->
        <div class="compliance-notice">
            <p><strong>ðŸ”’ Clean Room Data Compliance:</strong> All customer data is processed in a privacy-safe environment. Individual customer identities are not accessible. Attribution analysis uses aggregated, anonymized datasets with differential privacy protections applied.</p>
        </div>
    </div>

    <script>
        // Sample data
        const channelData = [
            { channel: 'Display', audience: 2840000, roas: 4.2, salesRate: 0.032, exposed: 2840000, unexposed: 1160000, lift: 18.5, liftVsUnexposed: 22.3, color: '#8B5CF6' },
            { channel: 'Search', audience: 1920000, roas: 5.8, salesRate: 0.045, exposed: 1920000, unexposed: 2080000, lift: 24.1, liftVsUnexposed: 28.7, color: '#3B82F6' },
            { channel: 'Social', audience: 3100000, roas: 3.6, salesRate: 0.028, exposed: 3100000, unexposed: 900000, lift: 15.2, liftVsUnexposed: 19.8, color: '#10B981' },
            { channel: 'Email', audience: 850000, roas: 6.4, salesRate: 0.052, exposed: 850000, unexposed: 3150000, lift: 31.5, liftVsUnexposed: 35.2, color: '#F59E0B' },
            { channel: 'Video', audience: 2200000, roas: 3.9, salesRate: 0.035, exposed: 2200000, unexposed: 1800000, lift: 16.8, liftVsUnexposed: 21.4, color: '#EF4444' },
            { channel: 'OOH', audience: 1500000, roas: 2.8, salesRate: 0.019, exposed: 1500000, unexposed: 2500000, lift: 8.9, liftVsUnexposed: 12.5, color: '#6B7280' }
        ];

        const journeyData = [
            { touchpoint: 1, conversionRate: 0.8, customers: 450 },
            { touchpoint: 2, conversionRate: 1.5, customers: 280 },
            { touchpoint: 3, conversionRate: 2.8, customers: 165 },
            { touchpoint: 4, conversionRate: 4.5, customers: 98 },
            { touchpoint: 5, conversionRate: 6.7, customers: 52 },
            { touchpoint: 6, conversionRate: 8.9, customers: 28 }
        ];

        const attributionData = [
            { model: 'Data Driven', revenue: 34.2 },
            { model: 'Time Decay', revenue: 32.6 },
            { model: 'Last Touch', revenue: 31.2 },
            { model: 'Position Based', revenue: 30.9 },
            { model: 'Linear', revenue: 29.8 },
            { model: 'First Touch', revenue: 28.4 }
        ];

        // Initialize charts
        function initCharts() {
            // ROAS Chart
            const roasCtx = document.getElementById('roasChart').getContext('2d');
            new Chart(roasCtx, {
                type: 'bar',
                data: {
                    labels: channelData.map(d => d.channel),
                    datasets: [{
                        label: 'ROAS',
                        data: channelData.map(d => d.roas),
                        backgroundColor: channelData.map(d => d.color),
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'ROAS' }
                        }
                    }
                }
            });

            // Journey Chart
            const journeyCtx = document.getElementById('journeyChart').getContext('2d');
            new Chart(journeyCtx, {
                type: 'line',
                data: {
                    labels: journeyData.map(d => `Touchpoint ${d.touchpoint}`),
                    datasets: [
                        {
                            label: 'Conversion Rate (%)',
                            data: journeyData.map(d => d.conversionRate),
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Customers (K)',
                            data: journeyData.map(d => d.customers),
                            borderColor: '#8B5CF6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: { display: true, text: 'Conversion Rate (%)' }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: { display: true, text: 'Customers (K)' },
                            grid: { drawOnChartArea: false }
                        }
                    }
                }
            });

            // Attribution Chart
            const attributionCtx = document.getElementById('attributionChart').getContext('2d');
            new Chart(attributionCtx, {
                type: 'bar',
                data: {
                    labels: attributionData.map(d => d.model),
                    datasets: [{
                        label: 'Revenue ($M)',
                        data: attributionData.map(d => d.revenue),
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Revenue ($M)' }
                        }
                    }
                }
            });
        }

        // Populate channel table
        function populateChannelTable() {
            const tbody = document.getElementById('channelTableBody');
            tbody.innerHTML = '';

            channelData.forEach(channel => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <span class="channel-indicator" style="background-color: ${channel.color}"></span>
                        ${channel.channel}
                    </td>
                    <td>${(channel.audience/1000000).toFixed(1)}M</td>
                    <td style="color: #059669; font-weight: 600;">${channel.roas}x</td>
                    <td>${(channel.salesRate * 100).toFixed(1)}%</td>
                    <td>${(channel.exposed/1000000).toFixed(1)}M</td>
                    <td>${(channel.unexposed/1000000).toFixed(1)}M</td>
                    <td style="color: #3B82F6; font-weight: 600;">+${channel.lift}%</td>
                    <td style="color: #8B5CF6; font-weight: 600;">+${channel.liftVsUnexposed}%</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Control functions
        function selectPeriod(element, period) {
            document.querySelectorAll('.control-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');
            console.log('Selected period:', period);
        }

        function exportReport() {
            alert('Export functionality would be implemented here');
        }

        // Initialize dashboard
        window.addEventListener('load', function() {
            initCharts();
            populateChannelTable();
        });
    </script>
</body>
</html>